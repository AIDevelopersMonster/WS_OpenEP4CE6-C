// ------------------------------------------------------------
//  Module     : joystick.v
//  Project    : Управление светодиодами с помощью джойстика для WS_OpenEP4CE6
//  Board      : WS_OpenEP4CE6 (FPGA на базе EP4CE6)
//  Created By : AIDevelopersMonster
//  Description:
//    Модуль для управления светодиодами с помощью джойстика. 
//    Каждая кнопка на джойстике (вверх, вниз, влево, вправо) отвечает за 
//    выключение соответствующего светодиода, а кнопка "z" выключает все светодиоды.
//    Этот модуль предназначен для работы с платой WS_OpenEP4CE6 (FPGA на базе EP4CE6).
//
//    Модуль реализует простую логику на основе кнопок джойстика:
//      - Кнопка "вверх" (key_up) выключает верхний светодиод.
//      - Кнопка "вниз" (key_down) выключает нижний светодиод.
//      - Кнопка "влево" (key_left) выключает левый светодиод.
//      - Кнопка "вправо" (key_right) выключает правый светодиод.
//      - Кнопка "z" выключает все светодиоды.
//
//    В случае, если ни одна кнопка не нажата, состояние светодиодов остается неизменным.
//    Модуль предназначен для работы с FPGA платой WS_OpenEP4CE6 и контролирует 4 светодиода.
//
// ------------------------------------------------------------
//  GitHub Repository: https://github.com/AIDevelopersMonster/WS_OpenEP4CE6-C/
//  YouTube Playlist: https://www.youtube.com/playlist?list=PLVoFIRfTAAI7-d_Yk6bNVnj4atUdMxvT5
// ------------------------------------------------------------
//  Примечания:
//    - Для использования данного модуля необходимо подключить кнопки джойстика и светодиоды 
//      к соответствующим пинам платы WS_OpenEP4CE6.
//    - Модуль был разработан для работы с тактовой частотой 50 МГц.
//    - Код легко адаптируется для других FPGA или изменений в количестве кнопок и светодиодов.
// ------------------------------------------------------------

module joystick(
    input clk,         // тактовый сигнал
    input reset,       // сигнал сброса
    input key_up,      // кнопка "вверх"
    input key_down,    // кнопка "вниз"
    input key_left,    // кнопка "влево"
    input key_right,   // кнопка "вправо"
    input key_z,       // кнопка "z"
    output [3:0] led   // 4-битный вывод для управления светодиодами
);

reg [3:0] led_reg;  // регистр для хранения состояния светодиодов

// всегда выполняется на каждом тактовом цикле или при сбросе
always @(posedge clk or negedge reset) 
begin
    if (!reset)          // если сигнал сброса активен
        led_reg <= 4'b1111;  // все светодиоды включены
    else if (!key_z)     // если нажата кнопка "z"
        led_reg <= 4'b0000;  // все светодиоды выключены
    else if (!key_up)    // если нажата кнопка "вверх"
        led_reg <= 4'b1110;  // выключен верхний светодиод
    else if (!key_down)  // если нажата кнопка "вниз"
        led_reg <= 4'b0111;  // выключен нижний светодиод
    else if (!key_left)  // если нажата кнопка "влево"
        led_reg <= 4'b1101;  // выключен левый светодиод
    else if (!key_right) // если нажата кнопка "вправо"
        led_reg <= 4'b1011;  // выключен правый светодиод
    else
        led_reg <= led_reg;  // если кнопки не нажаты, сохраняем текущее состояние
end

assign led = led_reg;  // выводим состояние светодиодов на выход

endmodule

//  Краткое описание конструкций Verilog:
//  
//    - **always@** - конструкция, которая описывает поведение в ответ на изменения
//      сигналов (тактового сигнала или сигнала сброса). Используется для создания 
//      последовательных блоков, где состояние изменяется с каждым тактом.
//
//    - **posedge/negedge** - ключевые слова, обозначающие фронт тактового сигнала.
//      `posedge` - положительный фронт (когда сигнал переходит с 0 на 1),
//      `negedge` - отрицательный фронт (когда сигнал переходит с 1 на 0).
//      Эти сигналы используются для синхронизации работы с тактовым сигналом.
//
//    - **assign** - используется для назначения значений на выходные порты или 
//      вычисляемые выражения в непрерывных блоках. Это позволяет управлять 
//      значениями в реальном времени, например, для назначения состояния светодиодов.
//
//    - **if/else** - конструкция условного перехода, которая позволяет выбрать 
//      одну из нескольких ветвей исполнения в зависимости от условий (например,
//      состояние кнопок джойстика).
//
//    - **<=** - неблокирующее присваивание, которое используется для обновления
//      значений переменных или регистров в последовательных блоках (в отличие от
//      блокирующего присваивания, которое выполняется немедленно).
//
//    - **reg** - тип данных, который используется для хранения значений и 
//      обновляется на основе тактового сигнала или других событий.
//      В отличие от `wire`, который представляет собой непрерывное соединение,
//      `reg` используется для хранения состояния, которое изменяется в 
//      ответ на тактовые сигналы.
//
//    - **input/output** - используются для описания портов модуля. Порты 
//      могут быть входными (input) или выходными (output), что позволяет
//      взаимодействовать с внешним миром или другими модулями.

